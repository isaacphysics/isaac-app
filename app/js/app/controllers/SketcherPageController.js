/**
 * Copyright 2016 Ian Davies & Andrew Wells

 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 *
 * You may obtain a copy of the License at
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

export const PageController = ['$scope', '$rootScope', '$stateParams', 'api', function($scope, _$rootScope, _$stateParams, api) {
    $scope.mode = "sketcher";
    // $scope.state = [];
    console.log($scope.state);
    // console.log($scope.graphState);
    // console.log($stateParams);
    // if ($scope.graphState) {
    // $scope.graphSpec = {
    //     result: api.questionSpecification.getSpec({"type":"graphChoice","value":JSON.stringify($scope.state)})
    // };
    // }
    $scope.$watch($scope.state, function(s) {
        console.log("changed state");
        // console.log($stateParams);
        if (s == null) return;
        try {
            let curves = JSON.parse(s);
            $scope.curveState = {
                curve: curves
            };
            // $scope.graphSpec = {
            //     result: api.questionSpecification.getSpec({"type":"graphChoice","value":$scope.curveState.curve})
            //     // result: api.questionSpecification.getSpec({"type":"graphChoice","value":"{\"canvasWidth\":1440,\"canvasHeight\":410,\"curves\":[{\"pts\":[[-0.2354,-0.2404],[-0.231,-0.2352],[-0.2267,-0.2299],[-0.2223,-0.2246],[-0.218,-0.2193],[-0.2137,-0.214],[-0.2093,-0.2088],[-0.205,-0.2035],[-0.2005,-0.1981],[-0.1963,-0.1928],[-0.192,-0.1876],[-0.1876,-0.1823],[-0.1833,-0.177],[-0.1789,-0.1717],[-0.1745,-0.1664],[-0.1702,-0.1611],[-0.1658,-0.1559],[-0.1615,-0.1506],[-0.1572,-0.1453],[-0.1529,-0.1401],[-0.1486,-0.1348],[-0.1442,-0.1295],[-0.1399,-0.1242],[-0.1355,-0.1189],[-0.1312,-0.1136],[-0.1268,-0.1085],[-0.1224,-0.1032],[-0.1181,-0.0979],[-0.1137,-0.0926],[-0.1095,-0.0873],[-0.1052,-0.0821],[-0.1008,-0.0767],[-0.0965,-0.0714],[-0.0921,-0.0662],[-0.0878,-0.0608],[-0.0835,-0.0556],[-0.0791,-0.0503],[-0.0747,-0.045],[-0.0703,-0.0398],[-0.066,-0.0345],[-0.0617,-0.0293],[-0.0573,-0.024],[-0.053,-0.0187],[-0.0487,-0.0134],[-0.0444,-0.008],[-0.0401,-0.0028],[-0.0357,0.0023],[-0.0314,0.0076],[-0.0269,0.0128],[-0.0226,0.0181],[-0.0183,0.0233],[-0.0139,0.0286],[-0.0096,0.0339],[-0.0052,0.0393],[-0.001,0.0446],[0.0031,0.0498],[0.0075,0.0551],[0.0118,0.0604],[0.0162,0.0657],[0.0205,0.0709],[0.025,0.0761],[0.0293,0.0814],[0.0336,0.0867],[0.038,0.092],[0.0423,0.0974],[0.0467,0.1026],[0.051,0.1079],[0.0553,0.1132],[0.0596,0.1185],[0.0639,0.1237],[0.0683,0.1289],[0.0726,0.1342],[0.077,0.1395],[0.0814,0.1448],[0.0857,0.1501],[0.0901,0.1554],[0.0944,0.1607],[0.0986,0.166],[0.103,0.1713],[0.1073,0.1765],[0.1117,0.1818],[0.116,0.1871],[0.1203,0.1923],[0.1248,0.1976],[0.1291,0.2028],[0.1335,0.2082],[0.1378,0.2135],[0.1421,0.2188],[0.1465,0.2241],[0.1508,0.2293],[0.1552,0.2346],[0.1595,0.2398],[0.1638,0.2452],[0.1681,0.2505],[0.1724,0.2557],[0.1769,0.261],[0.1812,0.2663],[0.1855,0.2716],[0.1899,0.2769],[0.1942,0.2821]],\"minX\":-0.235,\"maxX\":0.194,\"minY\":0.282,\"maxY\":-0.239,\"endPt\":[[381.024,303.564],[993.456,91.471]],\"interX\":[[-0.0377,0]],\"interY\":[[0,0.0457]],\"maxima\":[],\"minima\":[],\"colorIdx\":0},{\"pts\":[[-0.1527,-0.0317],[-0.1516,-0.0225],[-0.1504,-0.0137],[-0.1491,-0.0052],[-0.1477,0.0031],[-0.1461,0.0114],[-0.1445,0.0197],[-0.1428,0.028],[-0.1409,0.0363],[-0.1389,0.0446],[-0.1369,0.0529],[-0.1347,0.0611],[-0.1325,0.0692],[-0.1302,0.0771],[-0.1279,0.0848],[-0.1256,0.0922],[-0.1232,0.0993],[-0.1207,0.1061],[-0.1183,0.1124],[-0.1158,0.1184],[-0.1134,0.1239],[-0.1109,0.129],[-0.1083,0.1336],[-0.1058,0.1377],[-0.1033,0.1413],[-0.1007,0.1443],[-0.0981,0.1468],[-0.0955,0.1488],[-0.0928,0.1501],[-0.0902,0.1509],[-0.0875,0.1511],[-0.0848,0.1507],[-0.0821,0.1496],[-0.0794,0.148],[-0.0767,0.1457],[-0.074,0.1429],[-0.0713,0.1394],[-0.0686,0.1354],[-0.0659,0.1308],[-0.0633,0.1258],[-0.0607,0.1202],[-0.0582,0.1143],[-0.0556,0.1079],[-0.0531,0.1013],[-0.0507,0.0943],[-0.0483,0.0871],[-0.0459,0.0798],[-0.0435,0.0723],[-0.0412,0.0648],[-0.0389,0.0572],[-0.0366,0.0497],[-0.0344,0.0421],[-0.0321,0.0347],[-0.0299,0.0274],[-0.0276,0.0202],[-0.0253,0.0131],[-0.023,0.0062],[-0.0207,-0.0004],[-0.0184,-0.0069],[-0.016,-0.0132],[-0.0136,-0.0193],[-0.0111,-0.0251],[-0.0086,-0.0308],[-0.0061,-0.0362],[-0.0035,-0.0414],[-0.0008,-0.0463],[0.0018,-0.051],[0.0045,-0.0554],[0.0073,-0.0595],[0.0102,-0.0634],[0.0131,-0.067],[0.016,-0.0703],[0.0191,-0.0733],[0.0221,-0.076],[0.0252,-0.0783],[0.0284,-0.0803],[0.0316,-0.082],[0.0349,-0.0833],[0.0383,-0.0842],[0.0416,-0.0847],[0.0451,-0.0848],[0.0486,-0.0844],[0.0521,-0.0836],[0.0557,-0.0823],[0.0593,-0.0805],[0.063,-0.0781],[0.0667,-0.0752],[0.0703,-0.0718],[0.074,-0.0678],[0.0775,-0.0634],[0.081,-0.0584],[0.0844,-0.053],[0.0876,-0.0473],[0.0905,-0.0414],[0.0932,-0.0355],[0.0956,-0.0296],[0.0977,-0.0242],[0.0993,-0.0194],[0.1004,-0.0156],[0.1011,-0.0131],[0.1013,-0.0121]],\"minX\":-0.152,\"maxX\":0.101,\"minY\":0.151,\"maxY\":-0.084,\"endPt\":[[500,218],[865.6832905999074,210.37604969679393]],\"interX\":[[-0.1482,0],[-0.0209,0]],\"interY\":[[0,-0.0478]],\"maxima\":[[-0.0875,0.1511]],\"minima\":[[0.0451,-0.0848]],\"colorIdx\":0}]}"}
            //     )
            // };
        } catch (e) {
            console.error("Invalid curves");
        }
    });
}];

<div class="row">
   <div class="small-13 columns">
      <div ng-switch="boards">
         <div ng-switch-when="undefined">
            <h1>&nbsp;</h1>
            <p>&nbsp;</p>
         </div>
         <div ng-switch-default>
            <h2>My Boards</h2>
            <p class="hide-for-small-only"><strong>
               You have completed 
               <span class="ru_green">{{boards.totalCompleted}} board<span ng-if="boards.totalCompleted != 1">s</span></span>,
               with
               <span class="ru_green">{{boards.totalInProgress}}</span>
               on the go and
               <span class="ru_green">{{boards.totalNotStarted}}</span>
               not started.
            </strong></p>
         </div>
      </div>
   </div>
   <div class="medium-3 columns text-right hide-for-small-only">
      <span data-ot="A summary of your game boards and your personal progress on each of them." class="has-tip" aria-haspopup="true"><span class="icon-help"></span>Help</span>
   </div>
</div>

<div ng-switch="selectedViewOption.value">
   <div ng-switch-when="table">
      <table class="boards-table">
         <thead>
            <tr class="headings">
               <th ng-click="sortBy('title')"><h5>Board&nbsp;name&nbsp;{{propertyName === 'title' ? reverse ? icon.ascending : icon.descending : icon.sortable}}</h5></th>
               <th ng-click="sortBy('percentageCompleted')"><h5>Completion&nbsp;{{propertyName === 'percentageCompleted' ? reverse ? icon.ascending : icon.descending : icon.sortable}}</h5></th>
               <th><h5>Subjects</h5></th>
               <th><h5>Levels</h5></th>
               <th><h5>Created&nbsp;by</h5></th>
               <th ng-click="sortBy('creationDate')"><h5>Created&nbsp;{{propertyName === 'creationDate' ? reverse ? icon.ascending : icon.descending : icon.sortable}}</h5></th>
               <th ng-click="sortBy('lastVisited')"><h5>Last&nbsp;viewed&nbsp;{{propertyName === 'lastVisited' ? reverse ? icon.ascending : icon.descending : icon.sortable}}</h5></th>
               <th></th>
            </tr>
            <tr class="filters">
               <th><input ng-model="search.title" placeholder="Title search..." /></th>
               <th><select ng-model="customSearch.completion" ng-options="level for level in ['', 'Completed', 'In progress', 'Not started']"/></th>
               <th><select ng-model="search.subjects" ng-options="subject for subject in ['', 'physics', 'chemistry', 'maths']"/></th>
               <th><select ng-model="search.levels" ng-options="level for level in ['', '1', '2', '3', '4', '5', '6']"/></th>
               <th><select ng-model="search.createdBy" ng-options="level for level in ['', 'Me', 'Someone else']"/></th>
               <th></th>
               <th></th>
               <th></th>
            </tr>
         </thead>
         <tbody>
            <tr ng-model="boards" ng-repeat="board in boards.results | filter:search | filter:completionFilter | orderBy:propertyName:reverse">
               <td><a ui-sref="board({id: board.id})" ng-attr-title="{{board.title.length > 18 ? board.title : null}}"><strong>{{board.title || generateGameBoardTitle(board)}}</strong></a></td>
               <td>
                  <div class="board-percentage" ng-if="board.percentageCompleted != '100'">
                     <span ng-repeat="subject in calculateBoardSubjects(board)" class="subject-{{subject}}" ng-if="subject == 'maths'">
                        {{board.percentageCompleted}}<span class="percent-symbol">%</span>
                     </span>
                     <span ng-repeat="subject in calculateBoardSubjects(board)" class="subject-{{subject}}" ng-if="subject == 'physics'">
                        {{board.percentageCompleted}}<span class="percent-symbol">%</span>
                     </span>
                  </div>
                  <div class="board-percentage" ng-if="board.percentageCompleted == '100'">
                     <span class="subject-complete"></span>
                  </div>
               </td>
               <td>{{board.subjects | uppercase}}</td>
               <td>{{board.levels}}</td>
               <td>{{board.createdBy}}</td>
               <td>{{board.creationDate | date:'dd/MM/yyyy'}}</td>
               <td>{{board.lastVisited | date:'dd/MM/yyyy'}}</td>
               <td>
                  <a class="board-share" share-button sharelink="board/{{board.id}}"></a>
                  <div ng-if="isTeacher" class='ru_share_link ru_two_item_menu slide-animate' ng-show="showShareUrl">
                     <div>{{shareUrl}}</div>
                     <hr />
                     <a tabindex="0" href="javascript:void(0)" ui-sref="gameEditor({base: board.id})"><div class="menu_item"">Clone and Edit</div></a>
                  </div>
                  <div ng-if="!isTeacher" class='ru_share_link slide-animate' ng-show="showShareUrl">
                     <div>{{shareUrl}}</div>
                  </div>
                  <span ng-click="deleteBoard(board)">X</span>
               </td>
            </tr>
         </tbody>
      </table>
   </div>
   <div ng-switch-default>
      <div class="boards-filters" ng-show="boards != null">
         <ul class="small-block-grid-3">
            <li>
               <label class="hide-for-small-only">Show</label>
               <select ng-model="selectedNoBoardsOption" ng-options="option.label for option in boardSearchOptions.noBoards.values" />
               <select ng-model="selectedFilterOption" ng-options="option.label for option in boardSearchOptions.filter.values"></select>
            </li>
            <li>
               <label class="hide-for-small-only">Sort by</label>
               <select ng-model="selectedSortOption" ng-options="option.label for option in boardSearchOptions.sort.values"></select>
            </li>
         </ul>
      </div>
      <ul class="large-block-grid-3 medium-block-grid-2 small-block-grid-1 boards-wrap">
         <!-- Loop all boards and add a class if complete -->
         <li ng-model="boards" ng-repeat="board in boards.results" ng-class="{'board-complete': board.percentageCompleted == '100'}">
            <div class="panel">
               <span class="board-delete" ng-click="deleteBoard(board)">X</span>
               <a ui-sref="board({'id':board.id})">
                  <div class="row">
                     <div class="board-percentage" ng-if="board.percentageCompleted != '100'">
                        <span ng-repeat="subject in calculateBoardSubjects(board)" class="subject-{{subject}}" ng-if="subject == 'maths'">
                           {{board.percentageCompleted}}<span class="percent-symbol">%</span>
                        </span>
                        <span ng-repeat="subject in calculateBoardSubjects(board)" class="subject-{{subject}}" ng-if="subject == 'physics'">
                           {{board.percentageCompleted}}<span class="percent-symbol">%</span>
                        </span>
                     </div>
                     <div class="board-percentage" ng-if="board.percentageCompleted == '100'">
                        <span class="subject-complete"></span>
                     </div>
                     <div class="board-info">
                        <p>Created: <strong>{{board.creationDate | date:'dd/MM/yyyy'}}</strong></p>
                        <p>Last visited: <strong>{{board.lastVisited | date:'dd/MM/yyyy'}}</strong></p>
                        <div class="board-levels">
                           <span ng-repeat="level in calculateBoardLevels(board)" class="level-{{level}}">{{level}}</span>
                        </div>
                     </div>
                  </div>
               </a>
               <div class="row">
                  <h3><a class="board-title-link" tabindex="0" ui-sref="board({id: board.id})" ng-attr-title="{{board.title.length > 18 ? board.title : null}}">{{board.title || generateGameBoardTitle(board)}}</a></h3>
                  <div class="board-creator">
                     Created by:
                     <span ng-if="board.ownerUserId == user._id">Me</span>
                     <span ng-if="board.ownerUserId != user._id">Someone else</span>
                  </div>
                  <a class="board-share" share-button sharelink="board/{{board.id}}"></a>
                  <div ng-if="isTeacher" class='ru_share_link ru_two_item_menu slide-animate' ng-show="showShareUrl">
                     <div>{{shareUrl}}</div>
                     <hr />
                     <a tabindex="0" href="javascript:void(0)" ui-sref="gameEditor({base: board.id})"><div class="menu_item"">Clone and Edit</div></a>
                  </div>
                  <div ng-if="!isTeacher" class='ru_share_link slide-animate' ng-show="showShareUrl">
                     <div>{{shareUrl}}</div>
                  </div>
               </div>
            </div>
         </li>
      </ul>
      <div class="row" ng-hide="boards == null || boards.results.length == ''">
        <div class="large-5 medium-6 small-centered columns">
            <p class="text-center">Showing <strong>{{boards.results.length}}</strong> of <strong>{{boards.totalResults}}</strong></p>
            <a tabindex="0" ng-if="boards.totalResults > boards.results.length" class="ru-button-big expand" ng-click="loadMore()">View more</a>
         </div>
      </div>
   </div>
</div>
<div class="boards-filters" ng-show="boards != null">
   <label>Display as</label><select ng-model="selectedViewOption" ng-options="option.label for option in boardSearchOptions.view.values" />
</div>
<div class="row" ng-show="boards.results.length == ''">
   <p class="text-center">No Results</p>
</div>

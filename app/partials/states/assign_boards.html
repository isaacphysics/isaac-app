<div class="row ru-page-heading ng-scope">
    <div class="medium-13 columns">
        <h1>Assign a board</h1>
        <p class="hide-for-small-only">Assign game boards your groups</p>
    </div>
    <div class="medium-3 columns text-right hide-for-small-only">
        <span data-ot="Assign any of the boards you have created to your groups." class="has-tip" aria-haspopup="true"><span class="icon-help"></span>Help</span>
    </div>
</div>
<div class="boards-filters" ng-show="boards != null">
   <ul class="small-block-grid-2">
      <li>
         <label class="hide-for-small-only">Sort by</label>
         <select ng-model="sortOption" ng-options="option.label for option in sortOptions"></select>
      </li>
   </ul>
</div>
<ul class="large-block-grid-3 medium-block-grid-2 small-block-grid-1 assign-board-wrap">
      <li ng-repeat="board in boards.results">
   		<div class="panel">
            <a href="javascript:void(0)" class="board-delete" ng-click="deleteBoard(board.id, board.title || generateGameBoardTitle(board))">X</a>
            <div class="row">
               <div data-ot="{{getListOfGroups(groupAssignmentInfo[board.id])}}" data-ot-style="ru_boards" class="board-percentage test">
                  <!-- Remember to change subject class, this will change the colour -->
      				<span class="groups-assigned subject-physics">
                     <strong>{{groupAssignmentInfo[board.id].length || 0}}</strong> Groups Assigned
                  </span>
      			</div>

               <div class="board-info">
                  <p>Created: <strong>{{board.creationDate | date:'dd/MM/yyyy'}}</strong></p>
                  <p>By: <strong><span ng-if="board.ownerUserId == user._id">Me</span>
                  <span ng-if="board.ownerUserId != user._id">Someone else</span></strong></p>
               </div>
      		</div>
            <div class="row">
   			   <h3><a tabindex="0" href="javascript:void(0)" ui-sref="board({id: board.id})">{{board.title || generateGameBoardTitle(board)}}</a></h3>
               <a class="board-share" share-button sharelink="board/{{board.id}}"></a>
               <div class='ru_share_link slide-animate' ng-show="showShareUrl">
                  <div>
                     {{shareUrl}}
                  </div>
               </div>

               <div class="board-levels">
                  <span ng-repeat="level in calculateBoardLevels(board)" class="level-{{level}}">{{level}}</span>
               </div>
            </div>
            <div class="board-overview">
               <h6>Quick view...</h6>
               <ol>
                  <li ng-show="board.questions.length >= 1">{{board.questions[0].title}}</li>
                  <li ng-show="board.questions.length >= 2">{{board.questions[1].title}}</li>
                  <li ng-show="board.questions.length >= 3">{{board.questions[2].title}}</li>
               </ol>
            </div>
            <a class="ru-button-big tertiary expand" ng-click="toggleAssignPanel(board)" ng-show="openedAssignPanels.indexOf(board.id) == -1">Assign this board</a>
            <div ng-show="openedAssignPanels.indexOf(board.id) != -1" class="row board-section">
               <h6>Assign Group:</h6>
               <select ng-model="pendingAssignment[board.id]" ng-options="group.groupName for group in myGroups"></select>
               <div ng-if="false">
                  <h6>Due Date <span class="lighter">(optional):</span></h6>

                  <div class="ui-date-wrap">
                     <input ui-date="{showOn: 'button', buttonText: ''}" placeholder="Select your due date..." type="text" />
                  </div>
               </div>

               <a href="javascript:void(0)" class="ru-button-big expand" ng-click="assignBoard(board)">Assign this board</a>
               <!-- Change assign btn to this complete message -->
               <div ng-if="false" class="ru-button-big primary expand">Group Assigned<span class="icon-complete"></span></div>
               <a ng-if="false" class="ru-button-big tertiary expand">Edit Assigned Groups</a>
            </div>
            <div ng-show="openedAssignPanels.indexOf(board.id) != -1" class="row board-section">
               <h6>Assigned groups</h6>
               <table class="group-table">
                  <tbody>
                     <tr ng-repeat="groupsAssigned in groupAssignmentInfo[board.id]">
                        <td>{{groupsAssigned.groupName}}</td>
                        <td class="group-table-cal"><a ng-if="false" class="icon-cal--small" href="javascript:void(0)"></a></td>
                        <td class="group-table-delete"><a class="icon-delete" href="javascript:void(0)" ng-click="unassignBoard(groupsAssigned, board)"></a></td>
                     </tr>
                  </tbody>
               </table>
               <p ng-show="groupAssignmentInfo[board.id] == null || groupAssignmentInfo[board.id].length == 0">No groups are assigned.</p>
               <a href="javascript:void(0)" class="ru-button-big tertiary expand" ng-click="toggleAssignPanel(board)">Close</a>
            </div>
   		</div>
   	</li>
</ul>
<div class="row" ng-hide="boards == null || boards.results.length == ''">
  <div class="large-5 medium-6 small-centered columns">
      <p class="text-center">Showing <strong>{{boards.results.length}}</strong> of <strong>{{boards.totalResults}}</strong></p>
      <a tabindex="0" ng-if="boards.totalResults > boards.results.length" class="ru-button-big expand" ng-click="loadMore()">View more</a>
   </div>
</div>